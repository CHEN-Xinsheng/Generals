# Generals 将军棋

## 模块划分

1. 输入处理模块
2. 游戏逻辑模块
3. 输出处理模块

## 输入处理模块

### 输入

键盘的 `WASD` 、空格、 `esc` 、`Z` 。

### 功能

将键盘输入的扫描码转换为约定的信号，给游戏逻辑模块。

### 输出约定

7 个键，每个键分配一个输出信号。

检测到每个键的通码的时候，将对应的信号置 `0` ，检测到断码的时候，置 `1` 。在“游戏逻辑”模块中，当检测对应信号的上边沿时，认为点击了一次键盘。

## 游戏逻辑模块

### 输入

“输入处理模块”的七个信号。

### 功能

先判断光标移动是否合法。

然后判断本次操作是否是棋子移动。

进行结算。

将修改后的棋盘返回给“输出处理模块”。

### 输出

输出包含：

- 一个数组，表示棋盘每个格子的信息。数组的每个元素包含：兵力、归属（兵力为 0 表示没有归属）、是否为王城（、是否为山，之后再拓展）。
- 当前回合玩家
- 当前光标所在格子

## 输出处理模块

### 输入

即“游戏逻辑模块”的输出。

### 功能

根据输入的结构体数组，渲染出页面。
